{
  "version": 3,
  "sources": ["../src/Danmaku.ts", "../src/Track.ts", "../src/DanmakuEngine.ts", "../src/index.ts"],
  "sourcesContent": ["import { Track } from \"./Track\"\r\n\r\nexport class Danmaku {\r\n  public element: HTMLElement\r\n  public parentTrack: Track\r\n  constructor(track: Track, text: string) {\r\n    this.parentTrack = track\r\n    this.element = document.createElement('div')\r\n    this.element.style.position = 'absolute'\r\n    this.element.style.left = `${this.parentTrack.width}px`\r\n    this.element.style.top = `${this.parentTrack.index * this.parentTrack.height}px`\r\n    this.element.innerText = text\r\n  }\r\n\r\n  startMove() {\r\n    this.element.style.transition = `transform 5s linear`\r\n    this.element.style.transform = `translateX(-${this.parentTrack.width}px)`\r\n  }\r\n}", "import { Danmaku } from \"./Danmaku\"\r\n\r\nexport type TrackOptions = {\r\n  height: number\r\n  width: number\r\n  index: number\r\n}\r\n\r\nexport class Track {\r\n  public height: number\r\n  public width: number\r\n  public index: number\r\n  public isLocked: boolean = false\r\n\r\n  constructor(trackOptions: TrackOptions) {\r\n    this.height = trackOptions.height\r\n    this.width = trackOptions.width\r\n    this.index = trackOptions.index\r\n  }\r\n\r\n  send(text: string) {\r\n    this.isLocked = true\r\n    const danmaku = new Danmaku(this, text)\r\n    danmaku.startMove()\r\n  }\r\n}", "import { Track } from \"./Track\"\r\n\r\nexport type DanmakuEngineOptions = {\r\n  antiOcclusion?: boolean\r\n}\r\nexport class DanmakuEngine {\r\n  public container: HTMLElement\r\n  public tracks: Track[] = []\r\n  public cacheStack: string[] = []\r\n  public isPlaying: boolean = false\r\n  public interval: number | null = null\r\n  constructor(container: HTMLElement, options: DanmakuEngineOptions) {\r\n    this.container = container\r\n    this.#initTracks()\r\n\r\n  }\r\n\r\n  startPlaying() {\r\n    this.isPlaying = true\r\n    this.interval = setInterval(() => {\r\n      console.log(\"interval\",this.cacheStack);\r\n      \r\n      if (this.cacheStack.length) {\r\n        const text = this.cacheStack.shift()\r\n        if (text) {\r\n          const track = this.tracks.find(track => !track.isLocked)\r\n          if (track) {\r\n            track.send(text)\r\n          }\r\n        }\r\n      }\r\n    }, 500)\r\n  }\r\n\r\n  stopPlaying() {\r\n    this.isPlaying = false\r\n    if (this.interval) {\r\n      clearInterval(this.interval)\r\n      this.interval = null\r\n    }\r\n  }\r\n\r\n  send(text: string) {\r\n    this.cacheStack.push(text)\r\n  }\r\n\r\n  #initTracks() {\r\n    const trackCount = 5\r\n    for (let i = 0; i < trackCount; i++) {\r\n      const track = new Track({\r\n        height: 32,\r\n        width: this.container.clientWidth,\r\n        index: i\r\n      })\r\n      this.tracks.push(track)\r\n    }\r\n  }\r\n}", "export function hello(word: string) {\r\n  console.log('hello123')\r\n  return word\r\n}\r\n\r\nexport {DanmakuEngine} from './DanmakuEngine';\r\nexport * from './Track';\r\nexport * from './Danmaku';"],
  "mappings": ";AAEO,IAAM,UAAN,MAAc;AAAA,EACZ;AAAA,EACA;AAAA,EACP,YAAY,OAAc,MAAc;AACtC,SAAK,cAAc;AACnB,SAAK,UAAU,SAAS,cAAc,KAAK;AAC3C,SAAK,QAAQ,MAAM,WAAW;AAC9B,SAAK,QAAQ,MAAM,OAAO,GAAG,KAAK,YAAY,KAAK;AACnD,SAAK,QAAQ,MAAM,MAAM,GAAG,KAAK,YAAY,QAAQ,KAAK,YAAY,MAAM;AAC5E,SAAK,QAAQ,YAAY;AAAA,EAC3B;AAAA,EAEA,YAAY;AACV,SAAK,QAAQ,MAAM,aAAa;AAChC,SAAK,QAAQ,MAAM,YAAY,eAAe,KAAK,YAAY,KAAK;AAAA,EACtE;AACF;;;ACVO,IAAM,QAAN,MAAY;AAAA,EACV;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAoB;AAAA,EAE3B,YAAY,cAA4B;AACtC,SAAK,SAAS,aAAa;AAC3B,SAAK,QAAQ,aAAa;AAC1B,SAAK,QAAQ,aAAa;AAAA,EAC5B;AAAA,EAEA,KAAK,MAAc;AACjB,SAAK,WAAW;AAChB,UAAM,UAAU,IAAI,QAAQ,MAAM,IAAI;AACtC,YAAQ,UAAU;AAAA,EACpB;AACF;;;ACpBO,IAAM,gBAAN,MAAoB;AAAA,EAClB;AAAA,EACA,SAAkB,CAAC;AAAA,EACnB,aAAuB,CAAC;AAAA,EACxB,YAAqB;AAAA,EACrB,WAA0B;AAAA,EACjC,YAAY,WAAwB,SAA+B;AACjE,SAAK,YAAY;AACjB,SAAK,YAAY;AAAA,EAEnB;AAAA,EAEA,eAAe;AACb,SAAK,YAAY;AACjB,SAAK,WAAW,YAAY,MAAM;AAChC,cAAQ,IAAI,YAAW,KAAK,UAAU;AAEtC,UAAI,KAAK,WAAW,QAAQ;AAC1B,cAAM,OAAO,KAAK,WAAW,MAAM;AACnC,YAAI,MAAM;AACR,gBAAM,QAAQ,KAAK,OAAO,KAAK,CAAAA,WAAS,CAACA,OAAM,QAAQ;AACvD,cAAI,OAAO;AACT,kBAAM,KAAK,IAAI;AAAA,UACjB;AAAA,QACF;AAAA,MACF;AAAA,IACF,GAAG,GAAG;AAAA,EACR;AAAA,EAEA,cAAc;AACZ,SAAK,YAAY;AACjB,QAAI,KAAK,UAAU;AACjB,oBAAc,KAAK,QAAQ;AAC3B,WAAK,WAAW;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,KAAK,MAAc;AACjB,SAAK,WAAW,KAAK,IAAI;AAAA,EAC3B;AAAA,EAEA,cAAc;AACZ,UAAM,aAAa;AACnB,aAAS,IAAI,GAAG,IAAI,YAAY,KAAK;AACnC,YAAM,QAAQ,IAAI,MAAM;AAAA,QACtB,QAAQ;AAAA,QACR,OAAO,KAAK,UAAU;AAAA,QACtB,OAAO;AAAA,MACT,CAAC;AACD,WAAK,OAAO,KAAK,KAAK;AAAA,IACxB;AAAA,EACF;AACF;;;ACzDO,SAAS,MAAM,MAAc;AAClC,UAAQ,IAAI,UAAU;AACtB,SAAO;AACT;",
  "names": ["track"]
}
